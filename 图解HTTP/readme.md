# HTTP

  HTTP(HyperText Transfer Protocol) 超文本传输协议

  TCP/IP协议族按层次分四层: 应用层, 传输层, 网络层 和数据链路层。

  字库表/编码方式/字符集

## 应用层

  应用层决定了向用户提供应用服务时通信的活动。FTP(File Transfer Protocol),DNS (Domain Name System)。
  HTTP协议也处于该层。

  DNS: 提供域名到IP地址之间的解析服务。

## 传输层

  传输层对上层应用层,提供处于网络连接中的两台计算机之间的数据传输。在传输层有两个性质不同的协议
  TCP (Transmission Control Protocol) 和 UDP (User Data Protocol)

  3次握手
  用TCP协议把数据包发送出去后, 使用了TCP的标志 (SYN) synchronize。和ACK (acknowledgement)。

  发送端发送一个带有SYN 标志的数据包给对方。接收端收到后, 回传一个带有SYN/ACK标志的数据包以示传达确认信息。最后发送端再
  回传一个带ACK标志的数据包, 代表 '握手' 结束。

  TCP协议是为了更容易传送大数据才把数据分割,而且TCP协议能够确认数据是否送达对方。

  HTTP的长连接和短连接本质上是TCP长连接和短连接

## 网络层

  网络层用来处理在网络上流动的数据包。数据包式网络传输的最小数据单位。该层规定了通过怎样的路径 到达对方计算机。并把数据包传递
  给对方。

  IP (Internet Protocol) / MAC (Media Access Control Address)
  IP地址指明了节点被分配到的地址。MAC地址是指网卡所属的固定地址。IP地址可以和MAC地址进行配对。IP间的通信依赖MAC地址。

  ARP (Address Resolution Protocol) 是一个以解析地址的协议。

## 链路层

  用来处理连接网络的硬件部分。包括控制操作系统, 硬件的设备驱动, NIC(Network Interface Card, 网络适配器)以及光纤等物理可见部分。硬件上的范畴均在链路层的作用范围之内。

## URI/URL

  URI (Uniform Resource Identifier) 
  URI就是由某个协议方案表示的资源的定位标识符。协议方案是指访问资源所使用的协议类型名称。

  Uniform: 规定统一的格式可方便处理多种不同类型的资源, 而不用根据上下文环境来识别资源指定的访问方式
  Resource: 资源的 定义是 '可标识的任何东西'
  Identifier: 表示可标识的对象, 也称为标识符。

## 报文

  报文头大体可以分为四类: 通用报文头/请求报文头/响应报文头/实体报文头

## 请求方法

1. CONNECT 方法可以开启一个客户端与所请求资源之间的双向沟通的通道。它可以用来创建隧道。
2. GET  GET方法请求指定的资源。使用 **GET** 的请求应该只用于获取数据。
3. HEAD **HEAD 方法** 请求资源的头部信息,并且这些头部与HTTP GET 方法请求时返回的一致. 该请求方法的一个使用场景时在下载一个
大文件前先获取其大小再决定是否要下载, 以此可以节约带宽资源。
4. HTTP 的 **OPTIONS 方法** 用于获取目的资源所支持的通信选项。
5. POST 方法发送数据给服务器,请求主体的类型由 **Content-Type** 首部指定。PUT方法和POST方法的区别是 PUT方法是幂等的, 连续调用一次
或者多次调用的效果相同。
  application/x-www-form-urlencoded
  mutipart/form-data
  text/plain

## 状态码

1. 1XX: 代表请求已被接受,需要继续处理。只包含状态行和某些可选的响应头信息
2. 2XX: 表示成功, 代表请求已成功被服务器接受,理解并接受。
    202: 表示服务器已经接受到请求消息,但是尚未进行处理。对于请求的处理是无法保证的, 无法通过HTTP协议给客户端发送一个异步请求来告知其请求的处理结果。
    206: 代表请求已完成,并且主体包含所请求的数据区间, 该数据区间是在请求的 **Range** 首部指定的。
3. 3XX: 表示重定向, 表示客户端需要采取进一步的操作才能完成请求。
    301: 说明请求的资源已经移动到了由Location头部指定的url上,是固定的不会再改变。
    302: 表明请求的资源被暂时的移动到了由该HTTP响应头 Location 指定的URL上。
4. 4XX: 表示请求错误.
  401: Unauthorized 缺乏目标资源要求的身份验证凭证,发送的请求未得到满足。
  403: 客户端错误, 服务器有能力处理该请求, 但是拒绝访问请求
  404: 服务器无法找到所请求的资源。
  405: 服务器禁止使用当前HTTP方法的请求

5. 5XX: 
    500 Internal Server Error 是表示服务器端错误的响应状态码,意味着所请求的服务器遇到意外的情况并阻止其执行请求。
    502 Bad Gateway 是一种HTTP协议的服务端错误状态码, 它表示作为网关或代理的服务器, 从上游服务器中接收到的响应是无效的。

## HTTP/1.1 ----- 标准化的协议

  HTTP/1.1 消除了大量歧义内容并引入了多项改进:
1. 连接可以复用, 节省了多次打开TCP连接加载网页文档资源的时间。(持久连接: Keep Alive),只要任意一端没有明确提出断开连接, 则保持TCP连接状态。
2. 增加管线化技术, 允许在第一个应答被完全发送之前就发送第二个请求, 以降低通信延迟。
3. 支持响应分块。
4. 引入额外的缓存控制机制
5. 引入内容协商机制,包括语言,编码,类型等。并允许客户端和服务器之间约定以最合适的内容进行交换。

  持久连接的好处在于减少了TCP连接的重复建立和断开所造成额外开销,减轻了服务器端的负载。在HTTP/1.1中,所有的连接默认都是持久连接。

### 管线化

  持久连接使得多数请求以管线化(pipelining) 方式发送成为可能。从前发送请求后需等待并收到响应,才能发送下一个请求。管线化技术出现后,不用等待
  响应亦可直接发送下一个请求。

## HTTP认证

  服务器可以用来质询(challenge)客户端的请求, 客户端则可以提供身份验证凭据。

  Base认证 用户的ID/密码作为凭据信息,并且base64算法进行编码
  
1. 服务器向客户端返回401(Unauthorized 未被授权的) 响应状态码, 并在WWW-Authenticate响应标头提供如何进行验证的信息
2. 通过包含凭据的Authorization 请求标头进行验证。
3. 客户端会向用户显示密码提示,然后发送包含正确的Authorization标头的请求。

  Basic认证 / Digest认证 / SSL认证(HTTPS的客户端证书完成认证的方式) / 基于表单认证(session/cookie) / Bearer

## 网关

  Web网关 在一侧使用HTTP协议, 在另一侧使用另一种协议
1. (HTTP/*) 服务器端Web网关
2. (HTTP/HTTPS) 服务器端安全网关
3. (HTTPS/HTTP) 客户端安全加速器网关
4. 资源网关

  网关(Gateway) 网间连接器,协议转换器。网关在网络层以上实现网络互连, 是复杂的网络互连设备,仅用于两个高层协议不同的网络互连。
  网关既可以用户广域网互连,也可以用于局域网互连。网关是一种充当转换任务的计算机系统或设备。使用在不同的通信协议, 数据格式或语言...,
  网关是一个翻译器。

## HTTP缓存

  Cache-Control: 请求/响应头, 缓存控制字段
