<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3.x响应式</title>
</head>
<body>
  <!-- setup -->
  <div id="setup-demo">
    <button @click='increase'>{{count}}</button>
  </div>
  <hr>
  <!-- computed -->
  <div id="setup-computed">
    <input type="text" v-model='message'>
    <div>{{reverseMessage}}</div>
    <button @click='increase'>{{count}} - {{double}}</button>
  </div>
  <hr>
  <!-- watch -->
  <div id="setup-watch">
    <button @click='increase'>{{count}}</button>
    <button @click='change_age'>change age</button>
    <div>{{player.firstName}} - {{player.lastName}} - {{player.age}}</div>
  </div>
  <hr>
  <!-- slot-scope -->
  <div id="slot-scope">
    <div>{{message}}</div>
    <todo-button>hello world</todo-button>
  </div>
  <div id="slot-button">
    <scope-button>{{message}}</scope-button>
    <scope-button></scope-button>
  </div>
  <!-- 具名插槽 -->
  <div id="layout-app">
    <base-layout>
      <template v-slot:header>
        <h1>Here might be a page title</h1>
      </template>
      <template v-slot:main>
        <div>This is a paragraph</div>
      </template>
      <template v-slot:footer>
        <div>hello, 我是footer</div>
      </template>
    </base-layout>
  </div>
  <!-- 插槽作用域 -->
  <div id="slot-scope-app">
    <todo-list></todo-list>
    <player-list>
      <template v-slot:default='slotProps'>
        <span>{{slotProps.item}}</span>
      </template>
    </player-list>
  </div>
  <script src='../src/vue.development.js'></script>
  <script src='./src/21-setup.js'></script>
  <script src='./src/23-slot-scope.js'></script>
  <script type='module'>
    import { reactive, effect, ref, toRefs } from './src/22-reactive.js'
    const player = reactive({
      firstName: 'kyrie',
      lastName: 'irving',
      age:30
    })
    console.log(player.age) // 30
    delete player.age;
    console.log(player.age) // undefined


    const product = reactive({
      price:5000,
      count:3,
      name:'phone'
    })
    console.log('product', product)
    let total = 0;
    effect(() => {
      total = product.price * product.count;
    })
    console.log('total-1',total)

    product.price = 4000
    console.log('total-2',total)

    product.count = 1
    console.log('total-3',total)

    // ----------------- ref -------------
    const count = ref(0)
    console.log('count1:',count.value)
    count.value += 1;
    console.log('count:2', count.value)


    // --------- toRefs ----------
    function usePlayer(){
      const player = reactive({
        firstName:'kyrie',
        lastName:'irving',
        age:30
      })
      return toRefs(player)
    }
    const {firstName, lastName, age} = usePlayer()
    console.log('c', firstName.value, lastName.value, age.value)
    age.value += 1;
    console.log(age.value)
</script>
</body>
</html>
