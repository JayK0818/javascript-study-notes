<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>3.x响应式</title>
</head>
<body>
  <!-- setup -->
  <div id="setup-demo">
    <button @click='increase'>{{count}}</button>
  </div>
  <hr>
  <!-- computed -->
  <div id="setup-computed">
    <input type="text" v-model='message'>
    <div>{{reverseMessage}}</div>
    <button @click='increase'>{{count}} - {{double}}</button>
  </div>
  <hr>
  <!-- watch -->
  <div id="setup-watch">
    <button @click='increase'>{{count}}</button>
    <button @click='change_age'>change age</button>
    <div>{{player.firstName}} - {{player.lastName}} - {{player.age}}</div>
  </div>
  <script src='../src/vue.development.js'></script>
  <script src='./src/21-setup.js'></script>
  <script type='module'>
    import { reactive, effect, ref, toRefs } from './src/22-reactive.js'
    const player = reactive({
      firstName: 'kyrie',
      lastName: 'irving',
      age:30
    })
    console.log(player.age) // 30
    delete player.age;
    console.log(player.age) // undefined


    const product = reactive({
      price:5000,
      count:3,
      name:'phone'
    })
    console.log('product', product)
    let total = 0;
    effect(() => {
      total = product.price * product.count;
    })
    console.log('total-1',total)

    product.price = 4000
    console.log('total-2',total)

    product.count = 1
    console.log('total-3',total)

    // ----------------- ref -------------
    const count = ref(0)
    console.log('count1:',count.value)
    count.value += 1;
    console.log('count:2', count.value)


    // --------- toRefs ----------
    function usePlayer(){
      const player = reactive({
        firstName:'kyrie',
        lastName:'irving',
        age:30
      })
      return toRefs(player)
    }
    const {firstName, lastName, age} = usePlayer()
    console.log('c', firstName.value, lastName.value, age.value)
    age.value += 1;
    console.log(age.value)
</script>
</body>
</html>
